<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BenefiSys - Beneficiary Management System — Hope of Tomorrow</title>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
<section id="benefiSys" class="content-section">
  <h2 class="text-center">BenefiSys - Beneficiary Management System</h2>

  <!-- Staff login -->
  <div id="staffLogin" class="form-card narrow">
    <h3>Staff Login</h3>
    <input class="input-full" type="text" id="staffName" placeholder="Your Name">
    <input class="input-full" type="text" id="staffID" placeholder="Working ID">
    <button class="btn-primary" onclick="staffLogin()">Login</button>
  </div>

<a href="/Home-Page.html" class="btn btn-secondary">Home</a>
<a href="/services-we-offer.html" class="btn btn-secondary">Services</a>
<a href="/Donate.html" class="btn btn-secondary">Donate</a>
<a href="/sign-in-sign-up.html" class="btn btn-secondary">Sign In / Sign Up</a>
<a href="/Jobs.html" class="btn btn-secondary">Jobs</a>
<a href="/volunteer-with-us.html" class="btn btn-secondary">Volunteer with Us</a>
<a href="/Our-Partners.html" class="btn btn-secondary">Our Partners</a>
<a href="/Posting-System.html" class="btn btn-secondary">Posting System</a>
<a href="/Our-Staffs.html" class="btn btn-secondary">Our Staffs</a>
  <a href="/About-Us.html" class="btn btn-secondary">About-Us</a>
  <a href="/get-in-touch-with-us.html" class="btn btn-secondary">Get in Touch with Us</a>
  <a href="/contact-us.html" class="btn btn-secondary">Contact Us</a>
  <a href="/Subscribe.html" class="btn btn-secondary">Subscribe</a>


  <!-- Staff main panel -->
  <div id="staffPanel" class="hidden">
    <div class="panel-header">
      <h3>Beneficiaries</h3>
      <button class="btn btn-primary" onclick="addBeneficiary()">+ Add Beneficiary</button>
    </div>

    <!-- Search -->
    <input class="input-full" type="text" id="searchBeneficiary" placeholder="Search by Name or ID" onkeyup="searchBeneficiary()">

    <!-- Beneficiary List -->
    <div id="beneficiaryList"></div>
  </div>
</section>

<!-- Modal for Private Info / Manager Approval -->
<div id="managerModal" class="modal-overlay">
  <div class="modal-content">
    <h3>Manager Authorization Required</h3>
    <p id="managerMessage"></p>
    <button class="btn btn-primary" onclick="grantAccess(true)">Yes, Allow</button>
    <button class="btn btn-secondary" onclick="grantAccess(false)">No</button>
  </div>
</div>

<script>
// Helper
const getEl = id => document.getElementById(id);

let currentStaff = null;
let managerAuthorized = false;

// Staff login
function staffLogin() {
  const name = getEl('staffName').value;
  const id = getEl('staffID').value;
  if(!name || !id) return alert('Please enter your name and working ID');
  currentStaff = {name, id};
  
  // Simulate manager approval workflow
  showManagerModal(currentStaff);

  getEl('staffLogin').classList.add('hidden');
  getEl('staffPanel').classList.remove('hidden');

  loadBeneficiaries();
}

// Manager approval modal simulation
function showManagerModal(staff) {
  getEl('managerModal').classList.add('show');
  getEl('managerMessage').innerText = `Staff ${staff.name} (ID: ${staff.id}) is requesting access to BenefiSys. Allow access?`;
}

// Manager decision
function grantAccess(allow) {
  if(allow) {
    managerAuthorized = true;
    alert('Access granted. You can now view private sections.');
  } else {
    managerAuthorized = false;
    alert('Access denied. You can only view limited beneficiary info.');
  }
  getEl('managerModal').classList.remove('show');
}

// Beneficiary data array
let beneficiaries = JSON.parse(localStorage.getItem('beneficiaries') || '[]');

// Add Beneficiary
function addBeneficiary() {
  const fullName = prompt('Enter Full Name:');
  if(!fullName) return;
  const age = prompt('Enter Age:');
  const gender = prompt('Enter Gender:');
  const familySize = prompt('Family Size:');
  const address = prompt('Address:');
  const phone = prompt('Phone Number:');
  const autoID = 'BEN' + (beneficiaries.length + 1).toString().padStart(4,'0');
  const photo = prompt('Enter photo URL (optional)');

  const privateInfo = prompt('Enter private info (statements, family, etc.)');

  const newBeneficiary = {
    id: autoID,
    fullName, age, gender, familySize, address, phone, photo, privateInfo
  };
  beneficiaries.push(newBeneficiary);
  localStorage.setItem('beneficiaries', JSON.stringify(beneficiaries));

  loadBeneficiaries();
}

// Load Beneficiaries
function loadBeneficiaries() {
  const list = getEl('beneficiaryList');
  list.innerHTML = '';
  if(beneficiaries.length === 0) return list.innerHTML = '<p>No beneficiaries registered.</p>';

  beneficiaries.forEach(b => {
    list.innerHTML += `
      <div class="list-item">
        <strong>${b.fullName}</strong> | Age: ${b.age} | Family Size: ${b.familySize}<br>
        Address: ${b.address} | Phone: ${b.phone}<br>
        <img src="${b.photo || 'https://via.placeholder.com/100'}" alt="Photo" class="avatar"><br>
        <button class="btn btn-primary mt-6" onclick="viewPrivateInfo('${b.id}')">View Private Info</button>
      </div>
    `;
  });
}

// View Private Info
function viewPrivateInfo(id) {
  const b = beneficiaries.find(x => x.id === id);
  if(!managerAuthorized) return alert('You need manager approval to view private information. Request access first.');
  alert(`Private Info of ${b.fullName}: \n${b.privateInfo}`);
}

// Search beneficiary
function searchBeneficiary() {
  const query = getEl('searchBeneficiary').value.toLowerCase();
  const filtered = beneficiaries.filter(b => b.fullName.toLowerCase().includes(query) || b.id.toLowerCase().includes(query));
  const list = getEl('beneficiaryList');
  list.innerHTML = '';
  if(filtered.length === 0) return list.innerHTML = '<p>No results found.</p>';

  filtered.forEach(b => {
    list.innerHTML += `
      <div class="list-item">
        <strong>${b.fullName}</strong> | Age: ${b.age} | Family Size: ${b.familySize}<br>
        Address: ${b.address} | Phone: ${b.phone}<br>
        <img src="${b.photo || 'https://via.placeholder.com/100'}" alt="Photo" class="avatar"><br>
        <button class="btn btn-primary mt-6" onclick="viewPrivateInfo('${b.id}')">View Private Info</button>
      </div>
    `;
  });
}
</script>




<!-- ================= FOOTER ================= -->
<footer class="footer">
  
  <!-- Social Media Row -->
  <div class="footer-social">
    <a href="#" target="_blank"><img src="https://cdn-icons-png.flaticon.com/48/174/174848.png" alt="Facebook"></a>
    <a href="#" target="_blank"><img src="https://cdn-icons-png.flaticon.com/48/174/174855.png" alt="Twitter"></a>
    <a href="#" target="_blank"><img src="https://cdn-icons-png.flaticon.com/48/174/174857.png" alt="Instagram"></a>
    <a href="#" target="_blank"><img src="https://cdn-icons-png.flaticon.com/48/174/174879.png" alt="LinkedIn"></a>
    <a href="#" target="_blank"><img src="https://cdn-icons-png.flaticon.com/48/1384/1384060.png" alt="YouTube"></a>
     <a href="#" target="_blank"><img src="https://cdn-icons-png.flaticon.com/48/3046/3046123.png" alt="TikTok"></a> </div>

  <!-- Footer Columns -->
  <div class="footer-columns">
    
    <!-- Left Column -->
    <div class="footer-column">
      <h3>About Us</h3>
      <p>Hope of Tomorrow is committed to empowering communities, supporting volunteers, and delivering impactful services for those in need.</p>
    </div>

    <!-- Middle Column -->
    <div class="footer-column">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="/Home-Page.html">Home</a></li>
        <li><a href="/Services we offer.html">Services</a></li>
        <li><a href="/Donate.html">Donate</a></li>
        <li><a href="/Sign In-Sign Up.html">Sign In / Sign Up</a></li>
        <li><a href="/Jobs.html">Jobs</a></li>
        <li><a href="/Volunteer with-Us.html">Volunteer with Us</a></li>
      </ul>
    </div>

    <!-- Right Column -->
    <div class="footer-column">
      <h3>Legal & Support</h3>
      <ul>
       <li><a href="/privacy.html">Privacy Policy</a></li>
        <li><a href="#">Security</a></li>
        <li><a href="#">Terms & Conditions</a></li>
        <li><a href="#">Disclaimer</a></li>
        <li><a href="#">Help Center</a></li>
      </ul>
    </div>

  </div>

  <hr>
  <div class="footer-bottom">
    <p>© <span id="year"></span> Hope of Tomorrow. All Rights Reserved.</p>
  </div>

</footer>

<!-- ================= CSS ================= -->
<script src="assets/js/site.js"></script>

</body>
</html>